%  Last modified on  Wed May 24 17:51:57 2006

\chapter{Resultados e Avaliação}
\label{ch:resultados}
Neste capítulo será exposto o funcionamento comum do protótipo desenvolvido e serão avaliados os resultados do mesmo.

\section{Funcionamento Típico do Protótipo Desenvolvido}


Nesta secção será retratado o funcionamento típico do protótipo desenvolvido. Começa-remos pela instalação das componentes físicas, pelos procedimentos de ``arranque'', passando pelo funcionamento pleno de todo o sistema até ao comportamento das deduções efectuadas.

\subsection{Instalação e Arranque}
\label{ch:resultados:instalacao}

O primeiro aspecto a ter em mente é o sítio que cada Beacon terá. Estes devem estar dispostos de modo a que todas as posições a monitorizar estejam cobertas pelo alcance de, pelo menos, três Beacons. Assumindo que queremos monitorar a presença de Rovers numa sala inteira, na Figura~\ref{fig:GoodSetup} o de um bom posicionamento e na Figura~\ref{fig:BadSetup} temos um exemplo de um mau posicionamento.


\begin{figure}[t]
  \centering
  \includegraphics[width=56mm]{GoodSetup.png}
  \caption{Instalação bem planeada se se quiser cobrir a totalidade duma sala.}
  \label{fig:GoodSetup}
\end{figure}

\begin{figure}[t]
  \centering
  \includegraphics[width=56mm]{BadSetup.png}
  \caption{Instalação mal planeada se se quiser cobrir a totalidade duma sala.}
  \label{fig:BadSetup}
\end{figure}

A próxima preocupação é como dispor os Beacons em si, tanto o dispositivo BT como o anfitrião do mesmo\footnote{ Como explicado em 5.1, um Beacon como um todo é constituído pelo dispositivo BT e pela máquina onde este está hospedado.}. O dispositivo BT deve estar no sítio planeado no passo anterior. É preciso aprovisionar sítios para os anfitriões e, talvez, os cabos necessários para ligar os dispositivos BT aos anfitriões (caso a ligação seja USB ou a antena do dispositivo seja externa).

Tendo os Beacons dispostos e instalados, falta ligá-los a uma rede \nname{Ethernet}. Aqui, o maior inconveniente é ter de evitar o uso de WiFi. WiFi usa a mesma banda de frequências que o BT e pode interferir na localização, logo o seu uso deve ser minimizado.

O próximo passo é ligar o Central à rede \nname{Ethernet} e arrancar o programa desta parte do sistema. Durante o arranque, o Central envia para o \nname{stdout} o endereço IP e porta TCP aonde vai esperar que os Beacons se liguem. O passo seguinte é correr o binário que contém a parte do Beacon do sistema em cada um dos Beacons, dando como argumento o IP e a porta TCP do Central.

Nesta altura, os Beacons começam o diálogo com o Central. Primeiro avisam que começaram uma sessão de funcionamento. Não muito depois, os Beacons devem começar a tirar medições de RSSI\_ACL da força de sinal com que se ``vêem'' uns aos outros, informando o Central dos valores.

Nesta altura, o sistema está pronto a localizar um Rover que entre na sua área de actuação.

\subsection{Funcionamento}


Se ligarmos um dispositivo BT reconhecido como Rover, eventualmente\footnote{``Eventualmente'' porque um Beacon só pode tentar ligar-se a um Rover de cada vez e cada tentativa de ligação demora aproximadamente 5 segundos.}, os Beacons ligam-se a ele.

No melhor dos casos, os Beacons demoram 5 segundos a reconhecer a presença do Rover. No pior dos casos, demoram o número de Rovers registados multiplicado por cinco, em segundos. O valor máximo de espera por resposta de um Rover pode ser controlado. Com base em observações empíricas, abaixo dos 3 segundos, as ligações nem sempre se concretizam e acima de 5 segundos não temos aumento de conectividade numa área de 8 metros quadrados.

À medida que as ligações são efectuadas, retiradas medições do RSSI\_ACL e comunicado o seu valor ao Central, a interface gráfica vai mostrando as deduções feitas pelo Central. Quando três anéis se intersectam, é marcado na interface o centro geométrico da área de intersecção.

Na Figura~\ref{fig:Demo} temos uma imagem do \cname{Visualizer} em funcionamento. As bolas vermelha, verde e azul são Beacons. A bola azul claro é a estimativa actual da posição de um Rover. Cada anel verde é uma estimativa de um Beacon sobre um Rover. A área pintada a roxo é onde se espera que o Rover possa estar. Neste exemplo em específico, temos só uma ligação entre o Rover e o Beacon vermelho.

\begin{figure}[t]
  \centering
  \includegraphics[width=106mm]{Demo.png}
  \caption{Exemplo do \cname{Visualizer} em funcionamento.}
  \label{fig:Demo}
\end{figure}

\section{Comportamento e Avaliação das Estimativas}


Nos testes efectuados, os Beacons estavam dispostos num triângulo isósceles rectângulo, cada cateto com 2,5 metros.

Nos testes efectuados, o sistema, quase sempre, detectava com precisão quando o Rover se situava no centro geométrico do polígono formado pelos Beacons. À medida que o Rover se distanciava do centro, embora com menos sucesso, o sistema conseguia ``ver'' o sentido do deslocamento relativamente bem, mas não a quantidade do mesmo. Ou seja, o sistema sabia para que lado se mexeu o Rover, mas não o quanto se mexeu. As estimativas da amplitude do movimento eram sempre menores do que a amplitude real. Este desfasamento crescia à medida que o Rover se distanciava do centro.

Pelo comportamento observado, pode-se facilmente concluir que ignorar o andamento logarítmico do RSSI\_ACL ao longo da distância foi um erro. É de notar que, mesmo com esta falha, o protótipo consegue estimar minimamente a posição de um Rover. Isto evidencia algum progresso e dá segurança para investir mais estudo num sistema de radiolocalização passiva apoiada em BT.

\section{Resumo e Conclusões}
Além de explicado o processo típico de instalação e funcionamento do protótipo desenvolvido, neste capítulo conclui-se que o método explicado na Secção~\ref{ch:investigacao:relacao} produz resultados, mas muito pouco satisfatórios. O sistema é capaz, em situações muito específicas de, de facto, deduzir a posição de um Rover.

%$\ll$5 páginas sugeridas
%\vspace*{\baselineskip}
%
%A existência ou não deste capítulo depende do tipo de trabalho;
%admite-se que, em alguns casos, possa ser convertido numa secção do
%capítulo~\ref{ch:prototipo} ou do capítulo ~\ref{ch:conclusao}.
%
%\vspace*{\baselineskip}
%\noindent$\gg$
%%%
